<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.shape.Circle?>

<BorderPane prefHeight="768.0" prefWidth="1366.0"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.api.trabalhodegraduacao.controller.usuario.professor.GestaoCursosController"
            stylesheets="@../style.css">

    <left>
        <VBox alignment="TOP_CENTER" spacing="20.0" styleClass="sidebar">
            <padding><Insets top="10" right="15" bottom="20" left="15"/></padding>
            <children>
                <ImageView fitHeight="40" fitWidth="40" preserveRatio="true"><image><Image url="@../../../images/imgLogoRevolt.png" /></image></ImageView>
                <Label text="ADMINISTRAÇÃO" styleClass="sidebar-title" />

                <ImageView fx:id="imgVwFotoPerfil" fitHeight="150.0" fitWidth="150.0" styleClass="profile-image" pickOnBounds="true">
                    <image><Image url="@../../../images/imgFotoPerfil.png" /></image>
                    <clip><Circle radius="75.0" centerX="75.0" centerY="75.0" /></clip>
                </ImageView>

                <Region VBox.vgrow="ALWAYS"/>
                <Button onAction="#voltarDashboard" text="VOLTAR" styleClass="sidebar-button-secondary" maxWidth="Infinity"/>
            </children>
        </VBox>
    </left>

    <center>
        <VBox styleClass="main-content-pane">
            <padding><Insets top="20" right="40" bottom="40" left="40"/></padding>

            <Label text="GESTÃO DO CURSO E EQUIPE" styleClass="main-header-label" />
            <Region styleClass="header-separator"><VBox.margin><Insets top="10" bottom="20"/></VBox.margin></Region>

            <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent;">

                <Tab text="1. Cursos Disponíveis">
                    <VBox spacing="15.0" styleClass="profile-grid-pane">
                        <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                        <Label text="Adicionar Novo Curso:" styleClass="content-subtitle-label"/>
                        <HBox spacing="10.0">
                            <TextField fx:id="txtNovoCursoCod" promptText="Sigla (Ex: ADS)" prefWidth="100" styleClass="profile-text-input"/>
                            <TextField fx:id="txtNovoCursoNome" promptText="Nome Completo do Curso" HBox.hgrow="ALWAYS" styleClass="profile-text-input"/>
                            <Button text="Adicionar" onAction="#adicionarCurso" styleClass="profile-button-primary"/>
                        </HBox>
                        <ListView fx:id="listaCursos" VBox.vgrow="ALWAYS" styleClass="list-view-custom"/>
                        <Button text="Remover Selecionado" onAction="#removerCurso" styleClass="profile-button-secondary"/>
                    </VBox>
                </Tab>

                <Tab text="2. Permissões de Professores">
                    <VBox spacing="15.0" styleClass="profile-grid-pane">
                        <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                        <Label text="Atribuir Gerência de Curso a um Professor:" styleClass="content-subtitle-label"/>

                        <HBox spacing="10.0" alignment="CENTER_LEFT">
                            <ComboBox fx:id="cbProfessores" promptText="Selecione o Professor" prefWidth="300" styleClass="profile-text-input"/>
                            <ComboBox fx:id="cbCursosGestao" promptText="Curso Responsável" prefWidth="200" styleClass="profile-text-input"/>

                            <VBox spacing="5">
                                <CheckBox fx:id="chkIsOrientador" text="É Orientador?" styleClass="checkbox-custom-white" selected="true"/>
                                <CheckBox fx:id="chkIsGerente" text="É Gerente?" styleClass="checkbox-custom-white"/>
                            </VBox>

                            <Button text="Salvar Permissão" onAction="#salvarPermissao" styleClass="profile-button-primary"/>
                        </HBox>

                        <TableView fx:id="tabelaProfessores" VBox.vgrow="ALWAYS" styleClass="table-view-custom">
                            <columns>
                                <TableColumn fx:id="colProfNome" text="Professor" prefWidth="300"/>
                                <TableColumn fx:id="colProfFuncao" text="Papel Atual" prefWidth="150"/>
                                <TableColumn fx:id="colProfCurso" text="Curso Coordenado" prefWidth="200"/>
                            </columns>
                            <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                        </TableView>
                    </VBox>
                </Tab>

                <Tab text="3. Monitoramento da Turma">
                    <VBox spacing="10.0" styleClass="profile-grid-pane">
                        <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>

                        <Label fx:id="lblCursoMonitorado" text="Visão Geral dos Alunos" styleClass="content-subtitle-label"/>

                        <HBox spacing="10.0" alignment="CENTER_LEFT">
                            <Label text="Filtrar por Orientador:" textFill="white"/>
                            <ComboBox fx:id="cbFiltroOrientador" promptText="Todos os Orientadores" prefWidth="250" styleClass="profile-text-input"/>

                            <Region HBox.hgrow="ALWAYS" />

                            <Button text="Visualizar Detalhes do Aluno" onAction="#visualizarAluno" styleClass="profile-button-primary"/>
                        </HBox>

                        <TableView fx:id="tabelaMonitoramento" VBox.vgrow="ALWAYS" styleClass="table-view-custom">
                            <columns>
                                <TableColumn fx:id="colAlunoNome" text="Aluno" prefWidth="250"/>
                                <TableColumn fx:id="colAlunoOrientador" text="Orientador" prefWidth="200"/>
                                <TableColumn fx:id="colAlunoProgresso" text="Progresso Geral" prefWidth="150"/>
                                <TableColumn fx:id="colAlunoUltimaEntrega" text="Última Entrega" prefWidth="150"/>
                            </columns>
                            <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                        </TableView>

                        <Label text="* Selecione um aluno e clique em Visualizar para ver o TG e as Devolutivas." textFill="#cccccc" style="-fx-font-style: italic;"/>
                    </VBox>
                </Tab>

                <Tab text="4. Importar Usuários (CSV)">
                    <VBox alignment="CENTER" spacing="20.0" styleClass="profile-grid-pane">
                        <padding><Insets top="50" bottom="50"/></padding>
                        <Label text="Cadastrar em Massa via CSV" styleClass="content-subtitle-label"/>
                        <Label text="Selecione um arquivo .csv do seu computador para cadastrar alunos e professores." textFill="#cccccc"/>
                        <Label text="Exemplo: Nome_Completo,Email,Senha,Funcao,Email_Orientador,Curso_Aluno,Orientador,Gerenciador,Curso_Coordenacao" textFill="#cccccc"/>

                        <Button text="Selecionar Arquivo CSV" onAction="#importarCSV" styleClass="action-panel-button"/>

                        <TextArea fx:id="txtLogImportacao" editable="false" prefHeight="200" wrapText="true" styleClass="feedback-display-area" text="Aguardando arquivo..."/>
                    </VBox>
                </Tab>

            </TabPane>
        </VBox>
    </center>
</BorderPane>